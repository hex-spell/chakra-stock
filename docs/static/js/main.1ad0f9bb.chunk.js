(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{227:function(e,t,a){e.exports=a(416)},269:function(e,t,a){},320:function(e,t){},322:function(e,t){},359:function(e,t){},360:function(e,t){},416:function(e,t,a){"use strict";a.r(t);a(228),a(256),a(258),a(259),a(261);var n=a(0),r=a.n(n),o=a(64),c=a.n(o),l=(a(269),a(45)),i=a(4),u=a(54),s=a(423),d=a(15),m=a(6),p=a(5),f=a(422),E=Object(n.createContext)({}),g={header:"Error",confirmationMenu:{title:"Error",subtitle:void 0,action:function(){return console.log("Confirmation menu action error")}}},b=function(e,t){switch(t.type){case"SET_HEADER":return Object(p.a)(Object(p.a)({},e),{},{header:t.payload});case"SET_CONFIRMATION_MENU":return console.log(t.payload),Object(p.a)(Object(p.a)({},e),{},{confirmationMenu:t.payload});default:throw new Error}},O=function(e){var t=e.children,a=Object(n.useReducer)(b,g),o=Object(m.a)(a,2),c=o[0],l=o[1],i=Object(f.a)(),u=Object(n.useCallback)((function(e){return l({type:"SET_HEADER",payload:e})}),[]),s=Object(n.useCallback)((function(e){return l({type:"SET_CONFIRMATION_MENU",payload:e})}),[]),d=Object(n.useMemo)((function(){return{store:c,dispatch:l,confirmationDrawerState:i,setHeader:u,setConfirmationMenuData:s}}),[c,l,i,u,s]);return r.a.createElement(E.Provider,{value:d},t)},v=function(e){var t=e.onMenuClick,a=Object(n.useContext)(E).store.header;return r.a.createElement(l.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",bg:"teal.500",color:"white",position:"relative"},r.a.createElement(i.a,{position:"absolute",width:"100%",textAlign:"center"},r.a.createElement(u.a,{fontSize:"lg"},a)),r.a.createElement(s.a,{isRound:!0,"aria-label":"menu",icon:d.a,variantColor:"teal",size:"lg",onClick:t,m:"0.5rem"}))},h=a(437),C=a(53),y=Object(n.createContext)({}),_={name:"",email:"",user_id:0},j={user:_,token:"",isLoading:!0},D=function(e,t){switch(t.type){case"LOADING":return Object(p.a)(Object(p.a)({},e),{},{isLoading:t.payload});case"SAVE_TOKEN":return Object(p.a)(Object(p.a)({},e),{},{token:t.payload});case"SAVE_USER":return console.log(t.payload),console.log(Object(p.a)(Object(p.a)({},e),{},{user:t.payload})),Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case"LOG_OUT":return localStorage.removeItem("token"),{user:_,token:"",isLoading:!1};default:throw new Error}},S=function(e){var t=e.children,a=Object(n.useReducer)(D,j),o=Object(m.a)(a,2),c=o[0],l=o[1],i=Object(n.useMemo)((function(){return{store:c,dispatch:l}}),[c,l]);return r.a.createElement(y.Provider,{value:i},t)},x=a(136),k=a(97),w=function(e){var t=e.name,a=e.icon,n=e.onClick;return r.a.createElement(x.a,{variant:"ghost",size:"lg",width:"100%",justifyContent:"left",alignItems:"center",paddingLeft:"25px",borderBottom:"1px",borderColor:"rgba(0,0,0,0.1);",onClick:n},r.a.createElement(i.a,{as:a,marginRight:"25px"}),r.a.createElement(u.a,{fontWeight:"lighter",fontSize:"smaller"},t))},F=function(e){var t=e.link,a=e.name,n=e.icon,o=e.onClick,c=function(){return r.a.createElement(w,{name:a,icon:n,onClick:o})};return t?r.a.createElement(k.b,{to:t},r.a.createElement(c,null)):r.a.createElement(c,null)},M=function(e){var t=e.isOpen,a=e.onClose,o=e.links,c=Object(n.useContext)(y),l=c.store.user.name,i=c.dispatch;return r.a.createElement(h.a,{isOpen:t,placement:"left",onClose:a},r.a.createElement(h.d,null),r.a.createElement(h.c,null,r.a.createElement(h.b,null),r.a.createElement(C.e,null,l),r.a.createElement(C.b,{overflowY:"scroll",paddingX:"0"},t&&o.map((function(e,t){var a=e.name,n=e.link,o=e.icon;return r.a.createElement(F,{name:a,link:n,icon:o,key:t})})),r.a.createElement(F,{name:"Salir",icon:d.f,onClick:function(){return i({type:"LOG_OUT"})}}))))},P=function(e){var t=e.children;return r.a.createElement(i.a,{width:"100%",display:"flex",justifyContent:"center"},r.a.createElement(i.a,{width:["95%","90%","80%","80%"]},t))},I=function(e){var t=e.children;return r.a.createElement(i.a,{width:"100vw",height:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(i.a,null,t))},A=function(e){var t=e.icon,a=e.action,n=e.ariaLabel;return r.a.createElement(s.a,{width:"65px",height:"65px",fontSize:"25px",borderRadius:"50%","aria-label":n,icon:t,onClick:a,position:"fixed",bottom:"15px",right:"15px",isRound:!0,size:"lg",variantColor:"blue"})},L=function(e){var t=e.title,a=e.children,o=Object(n.useContext)(E).setHeader;return Object(n.useEffect)((function(){o(t)}),[t,o]),r.a.createElement(P,null,a)},R=a(424),V=function(e){var t=e.maxHeight,a=e.children;return r.a.createElement(R.a,{spacing:1,shouldWrapChildren:!0,maxHeight:t,overflowY:"scroll",pt:"2",pb:"85px"},a)},B=function(e){var t=e.children;return r.a.createElement(R.a,{spacing:1,shouldWrapChildren:!0,py:"10px"},t)},T=function(e){var t=e.children;return r.a.createElement(u.a,{opacity:.7,fontSize:"sm"},t)},q=function(e){var t=e.ammount,a=e.red,n=t<0||a?"darkred":"darkgreen";return r.a.createElement(u.a,{color:n,fontWeight:"600",display:"inline"},"$".concat(t<0?-t:t))},z=function(e){var t=e.children;return r.a.createElement(i.a,{display:"flex",justifyContent:"space-between",borderWidth:"1px",rounded:"md",px:"5",py:"2"},t)},U=a(435),N=function(e){var t=e.menu,a=e.onChange,n=e.defaultValue,o=e.name;return r.a.createElement(U.a,{onChange:a,defaultValue:n,name:o},t.map((function(e){var t=e.name,a=e.value,n=e.disabled;return r.a.createElement("option",{disabled:n,key:a,value:a},t)})))},$=function(e){var t=e.title,a=e.subtitle,o=e.menu,c=e.isOpen,l=e.onClose;return Object(n.useEffect)((function(){console.log(a)}),[a]),r.a.createElement(h.a,{isOpen:c,onClose:l,placement:"bottom"},r.a.createElement(h.d,null),r.a.createElement(h.c,null,r.a.createElement(h.b,null),r.a.createElement(C.e,null,t,r.a.createElement(u.a,null),a&&r.a.createElement(T,null,a)),r.a.createElement(C.b,null,c&&o.map((function(e){var t=e.name,a=e.action;return r.a.createElement(x.a,{variant:"ghost",size:"lg",width:"100%",justifyContent:"left",alignItems:"center",paddingLeft:"25px",borderBottom:"1px",borderColor:"rgba(0,0,0,0.1);",onClick:function(){l(),a()}},r.a.createElement(u.a,{fontWeight:"lighter",fontSize:"smaller"},t))})))))},G=function(e){var t=e.isOpen,a=e.onClose,n=e.title,o=e.subtitle,c=e.action;return r.a.createElement($,{isOpen:t,onClose:a,title:"\xbfSeguro que desea ".concat(n,"?"),subtitle:o,menu:[{name:"Confirmar",action:c},{name:"Cancelar",action:a}]})},H=a(436),W=function(e){var t=e.action;return r.a.createElement(x.a,{variantColor:"teal",variant:"ghost",width:"100%",onClick:t},"Cargar m\xe1s resultados...")},Y=a(18),K=a(425),J=a(426),Q=a(427);function X(){var e=Object(n.useContext)(y).store.user.name;return r.a.createElement(L,{title:"Inicio"},r.a.createElement(R.a,{spacing:5,mt:"5px"},r.a.createElement(i.a,{p:"10px",shadow:"md"},r.a.createElement(K.a,{size:"sm"},"Bienvenido/a ",e,"! Actualmente ten\xe9s 0 pedidos pendientes.")),r.a.createElement(J.a,null),r.a.createElement(i.a,{p:"10px",shadow:"md"},r.a.createElement(Q.b,null,r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Gasto mensual"),r.a.createElement(Q.e,null,"\xa30.00"),r.a.createElement(Q.c,null,"Feb 1 - Feb 28")),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Ganancia mensual bruta"),r.a.createElement(Q.e,null,"\xa30.00"),r.a.createElement(Q.c,null,"Feb 1 - Feb 28")),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Ganancia total"),r.a.createElement(Q.e,null,"\xa30.00"),r.a.createElement(Q.c,null,"Feb 1 - Feb 28")))),r.a.createElement(J.a,null),r.a.createElement(i.a,{p:"10px",shadow:"md"},r.a.createElement(Q.b,null,r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Deuda propia"),r.a.createElement(Q.e,null,"\xa30.00"),r.a.createElement(Q.c,null,"Feb 12 - Feb 28")),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Deuda de clientes"),r.a.createElement(Q.e,null,"\xa30.00"),r.a.createElement(Q.c,null,"Feb 12 - Feb 28"))))))}var Z=a(21),ee=a(14),te=a(22),ae=a.n(te);function ne(){return function(e,t){switch(t.type){case"SET_FILTERS":return Object(p.a)(Object(p.a)({},e),{},{filters:t.payload,offset:0});case"SET_OFFSET":return Object(p.a)(Object(p.a)({},e),{},{offset:t.payload});case"SET_CATEGORIES":return Object(p.a)(Object(p.a)({},e),{},{categories:t.payload});case"SET_RESULTS":return console.log("SET_RESULTS"),Object(p.a)(Object(p.a)({},e),{},{results:t.payload.results,count:t.payload.count,offset:0});case"PUSH_RESULTS":return console.log("PUSH_RESULTS"),Object(p.a)(Object(p.a)({},e),{},{count:t.payload.count,results:{status:t.payload.results.status,error:t.payload.results.error,payload:[].concat(Object(ee.a)(e.results.payload),Object(ee.a)(t.payload.results.payload))}});default:throw new Error}}}function re(e,t){return function(a,n){var r=a.offset,o=a.token;ae.a.get(e,{params:Object(p.a)({offset:r},n),headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return t({type:r?"PUSH_RESULTS":"SET_RESULTS",payload:{results:{status:"loaded",payload:e.data.result,error:null},count:e.data.count}})})).catch((function(e){return t({type:"SET_RESULTS",payload:{status:"error",error:e,payload:null}})}))}}function oe(e,t,a){return function(){ae.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){a({type:"SET_CATEGORIES",payload:e.data.result})})).catch((function(e){throw new Error("no se han podido obtener datos del server")}))}}function ce(e,t,a){return function(n,r){var o=0===r||void 0===r||null===r?"POST":"PUT";ae.a.request({url:e,method:o,data:n,headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return console.log(e.status)})).catch((function(e){return console.log(e)})).finally((function(){return a()}))}}function le(e,t,a,n){return function(r){return ae.a.delete(e,{params:Object(Z.a)({},t,r),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return console.log(e.status)})).catch((function(e){return console.log(e)})).finally((function(){return n()}))}}function ie(e,t){return{updateFilters:function(t){e({type:"SET_FILTERS",payload:t})},loadMoreData:function(){e({type:"SET_OFFSET",payload:t+10})}}}var ue="https://chakra-stock.herokuapp.com/contacts",se={filters:{search:"",role:"c",order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},de=ne(),me=function(){var e=Object(n.useReducer)(de,se),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(y).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(e,t){re(ue,r)(e,t)}),[]),f=Object(n.useState)([]),E=Object(m.a)(f,2),g=E[0],b=E[1],O=Object(n.useCallback)((function(){!function(e,t,a){return function(){ae.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){a(e.data.result)})).catch((function(e){throw new Error("no se han podido obtener datos del server")}))}}("".concat(ue,"/menu"),i,b)()}),[i]);return Object(n.useEffect)((function(){p({offset:c,token:i},o)}),[o,l,c,i,p]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateContact:function(e){return ce(ue,i,(function(){return p({token:i,offset:0},o)}))(e,e.contact_id)},contactsMenu:g,fetchContactsMinified:O,deleteContactById:function(e){return le(ue,"contact_id",i,(function(){return p({token:i,offset:0},o)}))(e)}}},pe="https://chakra-stock.herokuapp.com/expenses",fe=pe+"/categories",Ee={categories:null,filters:{search:"",category_id:null,order:"created_at"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},ge=ne(),be=function(){var e=Object(n.useReducer)(ge,Ee),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.categories,i=Object(n.useContext)(y).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(){oe(fe,i,r)()}),[i]),f=Object(n.useCallback)((function(e,t){re(pe,r)(e,t)}),[]);return Object(n.useEffect)((function(){f({token:i,offset:0},o)}),[i,o,f]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateExpense:function(e){return ce(pe,i,(function(){return f({token:i,offset:0},o)}))(e,e.expense_id)},fetchExpenseCategories:p,postOrUpdateExpenseCategory:function(e){return ce(fe,i,p)(e,e.category_id)},deleteExpenseCategoryById:function(e){return le(fe,"category_id",i,(function(){return p()}))(e)},deleteExpenseById:function(e){return le(pe,"expense_id",i,(function(){return f({token:i,offset:0},o)}))(e)},categories:l,category_id:o.category_id}},Oe="https://chakra-stock.herokuapp.com/products",ve=Oe+"/categories",he={categories:null,filters:{search:"",category_id:null,order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},Ce=ne(),ye=function(){var e=Object(n.useReducer)(Ce,he),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.categories,i=Object(n.useContext)(y).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(){oe(ve,i,r)()}),[i]),f=Object(n.useCallback)((function(e,t){re(Oe,r)(e,t)}),[]),E=Object(n.useState)(null),g=Object(m.a)(E,2),b=g[0],O=g[1],v=Object(n.useCallback)((function(){ae.a.get("".concat(Oe,"/list"),{headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){return O(e.data.result)}))}),[i]);return Object(n.useEffect)((function(){f({token:i,offset:0},o)}),[i,o,f]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateProduct:function(e){return ce(Oe,i,(function(){return f({token:i,offset:0},o)}))(e,e.product_id)},fetchProductCategories:p,postOrUpdateProductCategory:function(e){return ce(ve,i,p)(e,e.category_id)},deleteProductCategoryById:function(e){return le(ve,"category_id",i,(function(){return p()}))(e)},deleteProductById:function(e){return le(Oe,"product_id",i,(function(){return f({token:i,offset:0},o)}))(e)},categories:l,category_id:o.category_id,minifiedProductsList:b,fetchMinifiedProductsList:v}},_e="https://chakra-stock.herokuapp.com/orders",je={filters:{search:"",type:"b",completed:"not_completed",delivered:"all"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},De=ne(),Se=function(){var e=Object(n.useReducer)(De,je),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(y).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useState)(null),f=Object(m.a)(p,2),E=f[0],g=f[1],b=Object(n.useCallback)((function(e,t){re(_e,r)(e,t)}),[]),O=Object(n.useCallback)((function(){return b({offset:0,token:i},o)}),[b,o,i]),v=Object(n.useCallback)((function(e,t){ae.a.get("".concat(_e,"/id/products"),{headers:{Authorization:"Bearer ".concat(i)},params:{order_id:e}}).then((function(e){g(e.data.result),t&&t(),console.log(e)})).catch((function(e){return console.log(e)}))}),[i]),h=Object(n.useCallback)((function(e,t){ae.a.request({url:"".concat(_e,"/products"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){v(e.order_id,t||function(){return{}})})).catch((function(e){return console.log(e)}))}),[v,i]),C=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(_e,"/products"),method:"DELETE",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){v(e.order_id)}))}),[v,i]),_=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(_e,"/products/delivered"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]),j=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(_e,"/transactions"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]),D=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(_e,"/completed"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]);return Object(n.useEffect)((function(){b({offset:c,token:i},o)}),[o,l,c,i,b]),{result:a.results,count:a.count,updateFilters:s,update:O,loadMoreData:d,postOrUpdateOrder:function(e){ce(_e,i,(function(){return b({token:i,offset:0},o)}))(e,e.order_id),console.log(e)},deleteOrderById:function(e){return le(_e,"order_id",i,(function(){return b({token:i,offset:0},o)}))(e)},fetchOrderProductsByOrderId:v,orderProducts:E,postOrderProduct:h,deleteOrderProduct:C,markDelivered:_,postTransaction:j,markCompleted:D}},xe={filters:{search:"",type:"b",order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},ke=ne(),we=function(){var e=Object(n.useReducer)(ke,xe),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(y).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(e,t){re("https://chakra-stock.herokuapp.com/transactions",r)(e,t)}),[]);return Object(n.useEffect)((function(){p({offset:c,token:i},o)}),[o,l,c,i,p]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,UpdateTransactionByID:function(e){return ce("https://chakra-stock.herokuapp.com/transactions",i,(function(){return p({token:i,offset:0},o)}))(e,e.transaction_id)}}},Fe=function(e){return"".concat(e.getDay(),"/").concat(e.getMonth(),"/").concat(e.getFullYear()," - ").concat(e.getHours(),":").concat(e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes())},Me=a(30),Pe=a(52),Ie=a(68),Ae=function(e){var t=e.updateFilters,a=e.filtersData,n=Object(Me.b)(),o=n.register,c=n.handleSubmit,l=n.control,i=c((function(e){t(e)}));return r.a.createElement(Pe.a,null,r.a.createElement("form",{onSubmit:i,onChange:i},r.a.createElement(B,null,a.searchBar&&r.a.createElement(Ie.a,{name:a.searchBar.name,placeholder:a.searchBar.placeholder,defaultValue:a.searchBar.defaultValue,ref:o}),a.dropdowns&&a.dropdowns.map((function(e){var t=e.name,a=e.menu,n=e.defaultValue;return r.a.createElement(Me.a,{defaultValue:n,control:l,name:t,as:function(e){var t=e.onChange,n=e.value,o=e.name;return r.a.createElement(N,{menu:a,onChange:function(e){return t(e.target.value)},defaultValue:n,name:o})}})})))))},Le=a(428),Re=a(438),Ve=a(429),Be=a(430),Te=function(e){var t=e.isOpen,a=e.onClose,n=e.title,o=e.subtitle,c=e.subsubtitle,s=e.inputs,d=e.onFormSubmit,m=e.deleteFunction,p=e.deleteFieldName,f=Object(Me.b)(),E=f.register,g=f.handleSubmit,b=f.formState,O=f.errors,v=f.control,y=f.getValues,_=g((function(e){d(e),a()}));return r.a.createElement(h.a,{isOpen:t,onClose:a,placement:"bottom"},r.a.createElement(h.d,null),r.a.createElement(h.c,{maxHeight:"100vh",overflowY:"scroll"},r.a.createElement(h.b,null),r.a.createElement(C.e,null,n,r.a.createElement(u.a,null),o&&r.a.createElement(T,null,o),c&&r.a.createElement(T,null,c)),r.a.createElement(C.b,null,r.a.createElement(Pe.a,{isInvalid:Object.values(O).find((function(e){return!!e}))},r.a.createElement("form",{onSubmit:_},r.a.createElement(B,null,s.map((function(e){var t=e.name,a=e.title,n=e.defaultValue,o=e.validationRules,c=e.options,l=e.formHelperText,u=e.maxW;return r.a.createElement(r.a.Fragment,null,O[t]&&O[t].message&&r.a.createElement(Le.a,null,O[t].message),r.a.createElement(i.a,null,r.a.createElement(Re.a,{display:"flex"},r.a.createElement(Ve.a,{children:a,flexGrow:1}),c?r.a.createElement(Me.a,{defaultValue:n||(c[0]&&c[0].value?c[0].value:0),rules:o,control:v,name:t,as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(N,{menu:c,onChange:function(e){t(e.target.value)},defaultValue:a,name:n})}}):r.a.createElement(Ie.a,{name:t,defaultValue:n,ref:E(o),maxW:u||"initial"})),l&&r.a.createElement(Be.a,{mb:"10px"},l)))})),r.a.createElement(l.a,{justify:"flex-end"},m&&p&&r.a.createElement(x.a,{mt:4,variantColor:"red",isLoading:b.isSubmitting,onClick:function(){return function(e,t){t(y(e)),a()}(p,m)},float:"right"},"Borrar"),r.a.createElement(x.a,{mt:4,ml:4,variantColor:"teal",isLoading:b.isSubmitting,type:"submit",float:"right"},"Guardar"))))))))},qe=function(e){var t=e.updateFilters,a=e.categories;return r.a.createElement(Ae,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"category_id",menu:a?[{name:"Todas las categor\xedas",value:"0"}].concat(Object(ee.a)(a)):[{name:"...",value:"0"}],defaultValue:0},{name:"order",menu:[{name:"Ordenar por nombre",value:"name"},{name:"Ordenar por stock",value:"stock"},{name:"Ordenar por fecha de actualizaci\xf3n",value:"updated_at"},{name:"Ordenar por precio de venta",value:"sell_price"},{name:"Ordenar por precio de compra",value:"buy_price"}],defaultValue:"name"}]}})},ze=function(e){var t=e.title,a=e.ammount,n=e.buyPrice,o=e.sellPrice,c=e.updatedAt,s=e.onClick,m=new Date(c),p=Fe(m);return r.a.createElement("div",{onClick:function(){return s()}},r.a.createElement(z,null,r.a.createElement(l.a,{direction:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(T,null,a," ",a>1?"unidades":"unidad")),r.a.createElement(i.a,{flexDirection:"column",textAlign:"right",alignItems:"right",maxWidth:"40%"},r.a.createElement(i.a,{display:"flex",justifyContent:"flex-end",flexWrap:"wrap",maxWidth:"100%",alignItems:"right"},r.a.createElement(i.a,{display:"flex",m:"5px",mr:"0",flexDirection:"column",alignItems:n<1e4?"center":"flex-end",textAlign:"center"},r.a.createElement(i.a,{mr:n<1e4?"0":"1",as:d.c}),r.a.createElement(q,{red:!0,ammount:n})),r.a.createElement(i.a,{display:"flex",m:"5px",mr:"0",flexDirection:"column",alignItems:o<1e4?"center":"flex-end",textAlign:"center"},r.a.createElement(i.a,{mr:o<1e4?"0":"1",as:d.d}),r.a.createElement(q,{ammount:o}))),r.a.createElement(T,null,p))))},Ue=function(e){var t=e.name,a=e.address,n=e.phone,o=e.money,c=e.updatedAt,l=e.onClick,s=new Date(c),m=Fe(s);return r.a.createElement("div",{onClick:function(){return l()}},r.a.createElement(z,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(T,null,r.a.createElement(i.a,{as:d.j,display:"inline",mr:"5px"}),a),r.a.createElement(T,null,r.a.createElement(i.a,{as:d.k,display:"inline",mr:"5px"}),n)),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right",justifyContent:"space-between"},r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"},o>0?"A favor":"Deuda",": "),r.a.createElement(q,{ammount:o})),r.a.createElement(T,null,m))))},Ne=function(e){var t=e.name,a=e.itemAmmount,n=e.delivered,o=e.sum,c=e.debt,l=e.updatedAt,s=e.onClick,d=new Date(l),m=Fe(d);return r.a.createElement("div",{onClick:function(){return s()}},r.a.createElement(z,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(T,null,a," ",a>1?"items":"item"),r.a.createElement(T,null,r.a.createElement(H.a,{isChecked:n,size:"sm"},"Entregado"))),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right"},r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Suma: "),r.a.createElement(q,{ammount:o})),c>=0?r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Falta pagar: "),r.a.createElement(q,{ammount:c,red:!0})):r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Qued\xf3 a favor: "),r.a.createElement(q,{ammount:-c})),r.a.createElement(T,null,m))))},$e=function(e){var t=e.title,a=e.sum,n=e.createdAt,o=e.onClick,c=new Date(n),l=Fe(c);return r.a.createElement("div",{onClick:function(){return o()}},r.a.createElement(z,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t)),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right"},r.a.createElement(q,{ammount:a}),r.a.createElement(T,null,l))))},Ge=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh"},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.name,a=e.buy_price,o=e.sell_price,c=e.created_at,l=(e.updated_at,e.product_history_id),i=e.product_id,u=e.category_id,s=e.stock;return r.a.createElement(ze,{ammount:s,title:t,sellPrice:o,buyPrice:a,updatedAt:c,onClick:function(){return n({name:t,buy_price:a,sell_price:o,product_id:i,category_id:u,product_history_id:l,stock:s})}})})),t.payload&&t.payload.length<a&&r.a.createElement(W,{action:o}))},He=function(e){var t=e.listItemDrawerState,a=e.productDrawerState,n=e.confirmationDrawerState,o=e.productData,c=e.setConfirmationMenuData,l=e.deleteFunction,i=o.name,u=o.product_id;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(i),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar ".concat(i),action:function(){return l(u)}}),n.onOpen()}}]})},We=function(e){var t=e.actionButtonDrawerState,a=e.onAddProductClick,n=e.onAddProductCategoryClick,o=e.onModifyProductCategoryClick;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Stock",menu:[{name:"Registrar nueva categor\xeda",action:function(){n.onOpen()}},{name:"Modificar categor\xeda existente",action:function(){o.onOpen()}},{name:"Registrar nuevo producto",action:function(){a("Registrar nuevo producto")}}]})},Ye=function(e){var t=e.productCategoryDrawerState,a=e.submitFunction;e.categories;return r.a.createElement(Te,{title:"Crear nueva categor\xeda",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;return a({name:t,category_id:n})},inputs:[{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]})},Ke=function(e){var t=e.modifyProductCategoryDrawerState,a=e.submitFunction,n=e.categories,o=e.deleteProductCategoryById,c=e.selectedCategory,l=e.setConfirmationMenuData,i=e.confirmationDrawerState,u=e.productCategoryDrawerState;return r.a.createElement(r.a.Fragment,null,n&&0!==n.length?r.a.createElement(Te,{title:"Modificar categor\xeda existente",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;a({name:t,category_id:n})},deleteFunction:function(e){l({title:"eliminar la categor\xeda seleccionada",subtitle:"\u2022 Todos los productos que son de esta categor\xeda ser\xe1n eliminados en el proceso.",action:function(){return o(e)}}),i.onOpen()},deleteFieldName:"category_id",inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:c,options:n,validationRules:{required:"Debes elegir una categor\xeda",pattern:{value:/^[0-9]*$/,message:"La categor\xeda debe ser un numero"}}},{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]}):r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Parece que no has creado ninguna categor\xeda",subtitle:"\xbfDesea crear una ahora mismo?",menu:[{name:"Chi que chi",action:function(){return u.onOpen()}},{name:"\xd1o",action:function(){return t.onClose()}}]}))},Je=function(e){var t=e.productDrawerState,a=e.productDrawerFormState,n=e.productData,o=e.submitFunction,c=e.categories,l=n.product_id;return r.a.createElement(Te,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,a=e.buy_price,n=e.sell_price,r=e.stock,c=e.category_id;o({name:t,buy_price:a,sell_price:n,stock:r,category_id:c,product_id:l})},inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:n.category_id,options:c,validationRules:{required:"Parece que no has creado ninguna categor\xeda, hace eso primero",pattern:{value:/^[1-9]\d*$/,message:"Parece que no has creado ninguna categor\xeda, hace eso primero"}}},{name:"name",title:"Nombre",defaultValue:n.name,validationRules:{required:"Falta completar la descripcion",minLength:{value:5,message:"La descripcion debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La descripcion debe tener m\xe1ximo 30 caracteres"}}},{name:"buy_price",title:"Precio de compra",defaultValue:n.buy_price,validationRules:{required:"Falta completar el precio de venta",pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}},{name:"sell_price",title:"Precio de venta",defaultValue:n.sell_price,validationRules:{required:"Falta completar el precio de compra",pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}},{name:"stock",title:"Cantidad en stock",defaultValue:n.stock,validationRules:{required:"Falta completar el n\xfamero en stock",pattern:{value:/^-?[0-9]*$/,message:"El stock debe ser num\xe9rico"}}}]})},Qe={product_id:0,category_id:0,name:"",buy_price:0,sell_price:0,stock:0,product_history_id:0};function Xe(){var e=Object(n.useState)(Qe),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(n.useState)({title:"error",mode:"error"}),b=Object(m.a)(g,2),O=b[0],v=b[1],h=Object(n.useContext)(E),C=h.confirmationDrawerState,y=h.setConfirmationMenuData,_=ye(),j=_.result,D=_.count,S=_.updateFilters,x=_.loadMoreData,k=_.postOrUpdateProduct,w=_.fetchProductCategories,F=_.postOrUpdateProductCategory,M=_.deleteProductCategoryById,P=_.deleteProductById,I=_.categories,R=_.category_id;Object(n.useEffect)((function(){w()}),[w]);var V=Object(n.useState)(null),B=Object(m.a)(V,2),T=B[0],q=B[1];return Object(n.useEffect)((function(){I&&q(I.map((function(e){return{name:e.name,value:e.category_id}})))}),[I]),r.a.createElement(L,{title:"Stock"},r.a.createElement(qe,{updateFilters:S,categories:T}),r.a.createElement(Ge,{result:j,count:D,onItemClick:function(e){o(Object(p.a)({},e)),v({title:"Modificar: ".concat(e.name),mode:"edit"}),c.onOpen()},loadMoreData:x}),r.a.createElement(A,{icon:d.b,ariaLabel:"Menu: Stock",action:function(){return l.onOpen()}}),r.a.createElement(He,{listItemDrawerState:c,productDrawerState:i,confirmationDrawerState:C,productData:a,setConfirmationMenuData:y,deleteFunction:P}),r.a.createElement(We,{actionButtonDrawerState:l,onAddProductClick:function(e){return function(e){o(Object(p.a)({},Qe)),v({title:e,mode:"create"}),i.onOpen()}(e)},onAddProductCategoryClick:u,onModifyProductCategoryClick:s}),r.a.createElement(Je,{categories:T,productDrawerState:i,productDrawerFormState:O,submitFunction:function(e){return k(e)},productData:a}),r.a.createElement(Ye,{submitFunction:F,productCategoryDrawerState:u,categories:T}),r.a.createElement(Ke,{submitFunction:F,modifyProductCategoryDrawerState:s,categories:T,selectedCategory:R,deleteProductCategoryById:M,confirmationDrawerState:C,setConfirmationMenuData:y,productCategoryDrawerState:u}))}var Ze=function(e){var t=e.updateFilters;return r.a.createElement(Ae,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar (por nombre de contacto)..."},dropdowns:[{name:"type",menu:[{name:"Compras",value:"a"},{name:"Ventas",value:"b"}],defaultValue:"b"},{name:"completed",menu:[{name:"Pendientes",value:"not_completed"},{name:"Completadas",value:"completed"}],defaultValue:"not_completed"},{name:"delivered",menu:[{name:"Entregas finalizadas y pendientes",value:"all"},{name:"Entregas finalizadas",value:"delivered"},{name:"Entregas pendientes",value:"not_delivered"}],defaultValue:"all"}]}})},et=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh"},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.contact,a=e.products_count,o=e.delivered,c=e.sum,l=e.paid,i=e.updated_at,u=e.order_id,s=e.completed,d=e.type,m=e.contact_id;return r.a.createElement(Ne,{name:t.name,itemAmmount:a,delivered:o,sum:c,debt:c-l,updatedAt:i,onClick:function(){return n({contact:t,products_count:a,delivered:o,sum:c,paid:l,order_id:u,completed:s,type:d,contact_id:m})}})})),t.payload&&t.payload.length<a&&r.a.createElement(W,{action:o}))},tt=function(e){var t=e.listItemDrawerState,a=e.orderProductsDrawerState,n=e.confirmationDrawerState,o=e.deliveredProductsDrawerState,c=e.orderData,l=e.setConfirmationMenuData,i=e.orderTransactionDrawerState,u=e.markCompleted,s=e.deleteFunction,d=c.contact.name,m=c.order_id;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: pedido de ".concat(d),menu:[{name:"Ver productos",action:function(){return a.onOpen()}}].concat(Object(ee.a)(c.completed?[]:[{name:"Registrar entrega",action:function(){return o.onOpen()}}]),Object(ee.a)(c.completed?[]:[{name:"Registrar cobro",action:function(){return i.onOpen()}}]),Object(ee.a)(c.completed?[]:[{name:"Finalizar pedido",action:function(){l({title:"finalizar este pedido de ".concat(d),subtitle:"No se podran realizarle m\xe1s modificaciones",action:function(){return u({order_id:m})}}),n.onOpen()}}]),[{name:"Eliminar",action:function(){l({title:"eliminar este pedido de ".concat(d),action:function(){return s(m)}}),n.onOpen()}}])})},at=function(e){var t=e.actionButtonDrawerState,a=e.onAddOrderClick;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Pedidos",menu:[{name:"Registrar nuevo pedido",action:function(){a("Registrar nuevo pedido")}}]})},nt=function(e){var t=e.orderDrawerState,a=e.orderDrawerFormState,n=e.orderData,o=e.submitFunction,c=e.contacts,l=n.order_id;return r.a.createElement(Te,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.contact_id,a=e.type;console.log({order_id:l,contact_id:t,type:a}),o({order_id:l,contact_id:t,type:a})},inputs:[{name:"contact_id",title:"Contacto",defaultValue:n.contact.contact_id?n.contact.contact_id:c[0]?c[0].value:0,options:c,validationRules:{required:"Parece que no has creado ningun contacto"}},{name:"type",title:"Tipo",defaultValue:n.type?n.type:"b",options:[{name:"Compra",value:"a"},{name:"Venta",value:"b"}],validationRules:{required:"Error en la seleccion de tipo"}}]})},rt=function(e){var t=e.deliveredProductsDrawerState,a=e.orderProducts,n=e.submitFunction,o=e.clickedItem,c=o.order_id,l=o.contact.name;return r.a.createElement(Te,{title:"Registrando entrega del pedido de ".concat(l),subtitle:"Los valores por defecto entregan el pedido completo.",subsubtitle:"Los valores negativos simbolizan retornos.",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=Object.entries(e).map((function(e){return{product_id:parseInt(e[0]),ammount:parseInt(e[1])}}));n({order_id:c,products:t})},inputs:a?a.map((function(e){return{name:"".concat(e.product_id),title:e.product_version.name,defaultValue:e.ammount-e.delivered,validationRules:{required:!0,pattern:{value:/^-?[0-9]*$/,message:"la cantidad debe ser numerica"},validate:{max:function(t){return parseInt(t)<=e.ammount-e.delivered}}},formHelperText:"Pedidos: ".concat(e.ammount," - Entregados: ").concat(e.delivered," - Faltan entregar: ").concat(e.ammount-e.delivered),maxW:"20%"}})):[{name:"loading",title:"loading",defaultValue:0,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},ot=function(e){var t=e.orderTransactionDrawerState,a=e.orderData,n=e.submitFunction,o=a.order_id;return r.a.createElement(Te,{title:"Registrar cobro de pedido de ".concat(a.contact.name),isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.sum;n({order_id:o,sum:t})},inputs:[{name:"sum",title:"$",defaultValue:a.sum-a.paid,validationRules:{required:!0,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},ct=a(439),lt=a(431),it=a(432),ut=a(434),st=a(440),dt=function(e){var t=e.isOpen,a=e.onClose,o=e.onFormSubmit,c=e.deleteFunction,u=e.orderProducts,p=e.minifiedProductsList,f=e.fetchMinifiedProductsList,E=e.fetchProductCategories,g=e.categories,b=e.clickedItem,O=b.order_id,v=b.type,y=b.contact.name,_=b.completed,j=e.update,D=Object(Me.b)(),S=D.handleSubmit,k=D.formState,w=D.errors,F=D.control,M=D.watch,P=D.setValue,I=Object(n.useState)(null),A=Object(m.a)(I,2),L=A[0],V=A[1],T=Object(n.useState)(),q=Object(m.a)(T,2),z=q[0],U=q[1],$=Object(n.useState)(0),G=Object(m.a)($,2),H=G[0],W=G[1],Y=M("category"),K=M("product_id");Object(n.useEffect)((function(){f(),E()}),[f,E]),Object(n.useEffect)((function(){u&&p&&V(p.filter((function(e){return!u.find((function(t){return t.product_id===e.product_id}))})))}),[u,p]);var J=Object(n.useCallback)((function(e,t){var a=t.find((function(t){return t.product_id===parseInt(e)}));W(a&&a.stock?a.stock:0),P("ammount",1)}),[P]),X=Object(n.useCallback)((function(e){if(u&&p&&L){var t=(parseInt(e)?L.filter((function(t){return t.category_id===parseInt(e)})):L).map((function(e){return{name:e.name,value:e.product_id}}));console.log(t),U(t);var a=t[0]?t[0].value:0;P("product_id",a),J("".concat(a),p)}}),[L,J,p,u,P]);Object(n.useEffect)((function(){L&&X("0")}),[g,L,X]),Object(n.useEffect)((function(){p&&K&&J(K,p)}),[p,J,K,Y]);var Z=S((function(e){var t=e.product_id,a=e.ammount;console.log({product_id:t,ammount:a,order_id:O}),o({product_id:t,ammount:a,order_id:O},(function(){P("product_id",void 0),P("category",0)}))}));return r.a.createElement(h.a,{isOpen:t,onClose:function(){a(),j()},placement:"bottom"},r.a.createElement(h.d,null),r.a.createElement(h.c,{overflowY:"scroll",maxHeight:"100vh"},r.a.createElement(h.b,null),r.a.createElement(C.e,null,"Productos del pedido de ".concat(y)),r.a.createElement(C.b,null,r.a.createElement(i.a,{height:"30vh",overflowY:"scroll"},u&&r.a.createElement(ct.a,{allowToggle:!0,allowMultiple:!0},u.map((function(e){return r.a.createElement(ct.d,null,r.a.createElement(ct.b,null,r.a.createElement(i.a,{flex:"1",textAlign:"left"},"x".concat(e.ammount," "),e.product_version.name),r.a.createElement(ct.c,null)),r.a.createElement(ct.e,{pb:4},r.a.createElement(lt.c,{spacing:3},r.a.createElement(lt.b,null,r.a.createElement(lt.a,{icon:"attachment",color:"green.500"}),"Valor por unidad : $","a"===v?e.product_version.buy_price:e.product_version.sell_price),r.a.createElement(lt.b,null,r.a.createElement(lt.a,{icon:"attachment",color:"green.500"}),"Suma : $","a"===v?e.product_version.buy_price*e.ammount:e.product_version.sell_price*e.ammount),!_&&r.a.createElement(lt.b,null,r.a.createElement(lt.a,{icon:e.delivered===e.ammount?"check-circle":"warning",color:e.delivered===e.ammount?"green.500":"red.500"}),"Entregados : ",e.delivered)),!_&&r.a.createElement(R.a,{direction:"row",justify:"flex-end"},r.a.createElement(s.a,{icon:d.l,variantColor:"red",isLoading:k.isSubmitting,onClick:function(){return c({product_id:e.product_id,order_id:O})},float:"right","aria-label":"borrar"},"Borrar"))))})))),!_&&r.a.createElement(ct.a,{allowToggle:!0,allowMultiple:!0},r.a.createElement(ct.d,null,r.a.createElement(ct.b,null,r.a.createElement(i.a,{flex:"1",textAlign:"center"},r.a.createElement(it.a,{htmlFor:"addproduct",textAlign:"center",width:"100%",fontWeight:"bold"},"Agregar un producto")),r.a.createElement(ct.c,null)),r.a.createElement(ct.e,null,r.a.createElement(Pe.a,{isInvalid:Object.values(w).find((function(e){return!!e}))},r.a.createElement("form",{onSubmit:Z,name:"addproduct"},r.a.createElement(B,null,r.a.createElement(R.a,{justify:"center"},g&&r.a.createElement(i.a,null,r.a.createElement(it.a,{htmlFor:"category"},"Categor\xeda"),r.a.createElement(Me.a,{defaultValue:0,control:F,name:"category",as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(N,{menu:[{name:"Todas las categor\xedas",value:0}].concat(Object(ee.a)(g.map((function(e){return{name:e.name,value:e.category_id}})))),onChange:function(e){t(e.target.value),X(e.target.value)},defaultValue:a,name:n})}})),L&&r.a.createElement(i.a,null,r.a.createElement(it.a,{htmlFor:"product_id"},"Producto"),r.a.createElement(Me.a,{defaultValue:z&&z[0]?z[0].value:1,control:F,name:"product_id",as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(N,{menu:z||[],onChange:function(e){return t(e.target.value)},defaultValue:a,name:n})}}),r.a.createElement(Be.a,{mb:"10px"},"En stock: ".concat(H))),L&&r.a.createElement(i.a,null,r.a.createElement(it.a,{htmlFor:"ammount"},"Cantidad"),r.a.createElement(Me.a,{defaultValue:1,control:F,name:"ammount",as:function(e){var t=e.onChange,a=e.value;e.name;return r.a.createElement(i.a,null,r.a.createElement(l.a,{mr:3,mb:5},r.a.createElement(ut.a,{maxW:"100px",mr:"2rem",value:a,onChange:function(e){return t(e)}}),r.a.createElement(st.d,{max:"b"===v?H:20,min:1,flex:"1",value:a,onChange:function(e){return t(e)}},r.a.createElement(st.c,null),r.a.createElement(st.a,null),r.a.createElement(st.b,{fontSize:"sm",width:"32px",height:"20px",children:a}))))}}))),r.a.createElement(R.a,{justify:"space-between",direction:"row",align:"center"},u&&r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Suma total del pedido"),r.a.createElement(Q.e,{color:"darkgreen"},"$",u.reduce((function(e,t){return"a"===v?e+t.ammount*t.product_version.buy_price:e+t.ammount*t.product_version.sell_price}),0))),r.a.createElement(i.a,null,r.a.createElement(x.a,{variantColor:"teal",isLoading:k.isSubmitting,type:"submit"},"Agregar"))))))))))))},mt={order_id:0,completed:!1,type:"",contact_id:0,products_count:0,paid:0,sum:0,delivered:!1,contact:{name:"",address:"",phone:"",contact_id:0}};function pt(){var e=Object(n.useState)(mt),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(f.a)(),b=Object(n.useState)({title:"error",mode:"error"}),O=Object(m.a)(b,2),v=O[0],h=O[1],C=Object(n.useContext)(E),y=C.confirmationDrawerState,_=C.setConfirmationMenuData,j=Se(),D=j.result,S=j.count,x=j.updateFilters,k=j.loadMoreData,w=j.postOrUpdateOrder,F=j.deleteOrderById,M=j.fetchOrderProductsByOrderId,P=j.orderProducts,I=j.postOrderProduct,R=j.deleteOrderProduct,V=j.update,B=j.markDelivered,T=j.postTransaction,q=j.markCompleted,z=me(),U=z.contactsMenu,N=z.fetchContactsMinified;Object(n.useEffect)((function(){N()}),[N]);var $=ye(),G=$.minifiedProductsList,H=$.fetchMinifiedProductsList,W=$.fetchProductCategories,Y=$.categories;return r.a.createElement(L,{title:"Pedidos"},r.a.createElement(Ze,{updateFilters:x}),r.a.createElement(et,{result:D,count:S,onItemClick:function(e){o(e),h({title:"Modificar pedido de ".concat(e.contact.name),mode:"edit"}),e.order_id&&M(e.order_id),c.onOpen()},loadMoreData:k}),r.a.createElement(A,{icon:d.i,ariaLabel:"Menu: Gastos",action:function(){return l.onOpen()}}),r.a.createElement(tt,{listItemDrawerState:c,orderProductsDrawerState:s,confirmationDrawerState:y,deliveredProductsDrawerState:u,orderTransactionDrawerState:g,orderData:a,setConfirmationMenuData:_,markCompleted:q,deleteFunction:F}),r.a.createElement(at,{actionButtonDrawerState:l,onAddOrderClick:function(e){return function(e){o(Object(p.a)({},mt)),h({title:e,mode:"create"}),i.onOpen()}(e)}}),r.a.createElement(nt,{contacts:U,orderDrawerState:i,orderDrawerFormState:v,submitFunction:function(e){return w(e)},orderData:a}),r.a.createElement(dt,{clickedItem:a,isOpen:s.isOpen,onClose:s.onClose,orderProducts:P,minifiedProductsList:G,fetchMinifiedProductsList:H,fetchProductCategories:W,onFormSubmit:I,deleteFunction:R,categories:Y,update:V}),r.a.createElement(rt,{deliveredProductsDrawerState:u,orderProducts:P,clickedItem:a,submitFunction:B}),r.a.createElement(ot,{orderTransactionDrawerState:g,submitFunction:T,orderData:a}))}var ft=function(e){var t=e.updateFilters;return r.a.createElement(Ae,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"role",menu:[{name:"Clientes",value:"c"},{name:"Proveedores",value:"p"}],defaultValue:"c"},{name:"order",menu:[{name:"Ordenar por nombre",value:"name"},{name:"Ordenar por deuda",value:"money"},{name:"Ordenar por fecha de ult. Actualizaci\xf3n",value:"updated_at"}],defaultValue:"name"}]}})},Et=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh"},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.name,a=e.address,o=e.phone,c=e.money,l=e.role,i=e.updated_at,u=e.contact_id;return r.a.createElement(Ue,{name:t,address:a,phone:o,money:c,updatedAt:i,onClick:function(){return n({name:t,address:a,phone:o,money:c,role:l,contact_id:u})}})})),t.payload&&t.payload.length<a&&r.a.createElement(W,{action:o}))},gt=function(e){var t=e.listItemMenu,a=e.contactMenu,n=e.confirmationDrawerState,o=e.contactData,c=e.setConfirmationMenuData,l=e.postOrUpdateContact,i=e.deleteContactById,u=o.name;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(u),menu:[{name:"Llamar",action:function(){window.open("tel:+540".concat(o.phone),"_blank")}},{name:"Modificar",action:function(){return a.onOpen()}},{name:"Saldar deuda",action:function(){return alert("Saldar deuda de ".concat(u))}},{name:"Reiniciar el contador de dinero",action:function(){c({title:"reiniciar el contador de ".concat(u),action:function(){return l(Object(p.a)(Object(p.a)({},o),{},{money:0}))}}),n.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar a ".concat(u),action:function(){return i(o.contact_id)}}),n.onOpen()}}]})},bt=function(e){var t=e.actionButtonMenu,a=e.onAddContactClick;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Contactos",menu:[{name:"Registrar nuevo cliente",action:function(){a("c","Registrar nuevo cliente")}},{name:"Registrar nuevo proveedor",action:function(){a("p","Registrar nuevo proveedor")}}]})},Ot=function(e){var t=e.contactMenu,a=e.contactMenuFormState,n=e.contactData,o=e.submitFunction,c=n.contact_id,l=n.role;return r.a.createElement(Te,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.address,a=e.money,n=e.name,r=e.phone;return o({address:t,money:a,name:n,phone:r,contact_id:c,role:l})},inputs:[{name:"name",title:"Nombre",defaultValue:n.name,validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}},{name:"phone",title:"Tel\xe9fono",defaultValue:n.phone,validationRules:{required:"Falta completar el tel\xe9fono",minLength:{value:10,message:"El telefono debe tener m\xednimo 10 caracteres"},maxLength:{value:30,message:"El telefono debe tener m\xe1ximo 30 caracteres"},pattern:{value:/^(?:(?:00)?549?)?0?(?:11|[2368]\d)(?:(?=\d{0,2}15)\d{2})??\d{8}$/,message:"El tel\xe9fono debe ser v\xe1lido para Argentina"}}},{name:"address",title:"Direcci\xf3n",defaultValue:n.address,validationRules:{required:"Falta completar la direcci\xf3n",minLength:{value:5,message:"La direcci\xf3n debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La direcci\xf3n debe tener m\xe1ximo 30 caracteres"}}},{name:"money",title:"Dinero",defaultValue:n.money,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},vt={contact_id:0,name:"",phone:"",money:0,role:"c",address:""};function ht(){var e=Object(n.useState)(vt),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(n.useState)({title:"error",mode:"error",role:"c"}),s=Object(m.a)(u,2),g=s[0],b=s[1],O=Object(n.useContext)(E),v=O.confirmationDrawerState,h=O.setConfirmationMenuData,C=me(),y=C.result,_=C.count,j=C.updateFilters,D=C.loadMoreData,S=C.postOrUpdateContact,x=C.deleteContactById;return r.a.createElement(L,{title:"Contactos"},r.a.createElement(ft,{updateFilters:j}),r.a.createElement(Et,{result:y,count:_,onItemClick:function(e){o(Object(p.a)({},e)),b({title:"Modificar: ".concat(e.name),mode:"edit",role:e.role}),c.onOpen()},loadMoreData:D}),r.a.createElement(A,{icon:d.m,ariaLabel:"Menu: Contactos",action:function(){return l.onOpen()}}),r.a.createElement(gt,{listItemMenu:c,contactMenu:i,confirmationDrawerState:v,contactData:a,setConfirmationMenuData:h,postOrUpdateContact:function(e){return S(e)},deleteContactById:x}),r.a.createElement(bt,{actionButtonMenu:l,onAddContactClick:function(e,t){return function(e,t){o(Object(p.a)(Object(p.a)({},vt),{},{role:e})),b({title:t,mode:"create",role:e}),i.onOpen()}(e,t)}}),r.a.createElement(Ot,{contactMenu:i,contactMenuFormState:g,submitFunction:function(e){return S(e)},contactData:a}))}var Ct=function(e){var t=e.updateFilters;return r.a.createElement(Ae,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"type",menu:[{name:"Cobros",value:"b"},{name:"Pagos",value:"a"}],defaultValue:"b"}]}})},yt=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh"},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.transaction_id,a=e.name,o=e.sum,c=e.type,l=e.order_id,i=e.contact_id,u=e.created_at;return r.a.createElement($e,{title:a,sum:o,createdAt:u,onClick:function(){return n({transaction_id:t,name:a,sum:o,type:c,order_id:l,contact_id:i})}})})),t.payload&&t.payload.length<a&&r.a.createElement(W,{action:o}))},_t=function(e){var t=e.listItemMenu,a=e.transactionMenu,n=e.confirmationDrawerState,o=e.transactionData,c=e.setConfirmationMenuData,l=o.name;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(l),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar transaccion de ".concat(l),action:function(){return alert("".concat(l," eliminado"))}}),n.onOpen()}}]})},jt=function(e){var t=e.transactionMenu,a=e.transactionData,n=e.submitFunction,o=a.transaction_id,c=a.type,l=a.name;return r.a.createElement(Te,{title:"Modificar ".concat("a"===c?"pago":"cobro"," a ").concat(l),isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.sum;return n({sum:t,transaction_id:o})},inputs:[{name:"sum",title:"Dinero",defaultValue:a.sum,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},Dt={transaction_id:0,name:"",sum:0,type:"b",order_id:0,contact_id:0};function St(){var e=Object(n.useState)(Dt),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(n.useContext)(E),u=i.confirmationDrawerState,s=i.setConfirmationMenuData,d=we(),g=d.result,b=d.count,O=d.updateFilters,v=d.loadMoreData,h=d.UpdateTransactionByID;return r.a.createElement(L,{title:"Transacciones"},r.a.createElement(Ct,{updateFilters:O}),r.a.createElement(yt,{result:g,count:b,onItemClick:function(e){o(Object(p.a)({},e)),c.onOpen()},loadMoreData:v}),r.a.createElement(_t,{listItemMenu:c,transactionMenu:l,confirmationDrawerState:u,transactionData:a,setConfirmationMenuData:s}),r.a.createElement(jt,{transactionMenu:l,submitFunction:function(e){return h(e)},transactionData:a}))}var xt=function(e){var t=e.updateFilters,a=e.categories;return r.a.createElement(Ae,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"category_id",menu:a?[{name:"Todas las categor\xedas",value:"0"}].concat(Object(ee.a)(a)):[{name:"...",value:"0"}],defaultValue:0},{name:"order",menu:[{name:"Ordenar por fecha de creaci\xf3n",value:"created_at"},{name:"Ordenar por descripcion",value:"description"},{name:"Ordenar por suma",value:"sum"}],defaultValue:"created_at"}]}})},kt=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh"},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.description,a=e.sum,o=e.created_at,c=(e.updated_at,e.expense_id),l=e.category_id;return r.a.createElement($e,{title:t,sum:-a,createdAt:o,onClick:function(){return n({description:t,expense_id:c,category_id:l,sum:a})}})})),t.payload&&t.payload.length<a&&r.a.createElement(W,{action:o}))},wt=function(e){var t=e.listItemDrawerState,a=e.expenseDrawerState,n=e.confirmationDrawerState,o=e.expenseData,c=e.setConfirmationMenuData,l=e.deleteFunction,i=o.description,u=o.expense_id;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(i),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar ".concat(i),action:function(){return l(u)}}),n.onOpen()}}]})},Ft=function(e){var t=e.actionButtonDrawerState,a=e.onAddExpenseClick,n=e.onAddExpenseCategoryClick,o=e.onModifyExpenseCategoryClick;return r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Gastos",menu:[{name:"Registrar nueva categor\xeda",action:function(){n.onOpen()}},{name:"Modificar categor\xeda existente",action:function(){o.onOpen()}},{name:"Registrar nuevo gasto",action:function(){a("Registrar nuevo gasto")}}]})},Mt=function(e){var t=e.expenseCategoryDrawerState,a=e.submitFunction;e.categories;return r.a.createElement(Te,{title:"Crear nueva categor\xeda",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;return a({name:t,category_id:n})},inputs:[{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]})},Pt=function(e){var t=e.modifyExpenseCategoryDrawerState,a=e.submitFunction,n=e.categories,o=e.deleteExpenseCategoryById,c=e.selectedCategory,l=e.setConfirmationMenuData,i=e.confirmationDrawerState,u=e.expenseCategoryDrawerState;return r.a.createElement(r.a.Fragment,null,n&&0!==n.length?r.a.createElement(Te,{title:"Modificar categor\xeda existente",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;a({name:t,category_id:n})},deleteFunction:function(e){l({title:"eliminar la categor\xeda seleccionada",subtitle:"\u2022 Todos los gastos que son de esta categor\xeda ser\xe1n eliminados en el proceso.",action:function(){return o(e)}}),i.onOpen()},deleteFieldName:"category_id",inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:c,options:n,validationRules:{required:"Debes elegir una categor\xeda",pattern:{value:/^[0-9]*$/,message:"La categor\xeda debe ser un numero"}}},{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]}):r.a.createElement($,{isOpen:t.isOpen,onClose:t.onClose,title:"Parece que no has creado ninguna categor\xeda",subtitle:"\xbfDesea crear una ahora mismo?",menu:[{name:"Chi que chi",action:function(){return u.onOpen()}},{name:"\xd1o",action:function(){return t.onClose()}}]}))},It=function(e){var t=e.expenseDrawerState,a=e.expenseDrawerFormState,n=e.expenseData,o=e.submitFunction,c=e.categories,l=n.expense_id;return r.a.createElement(Te,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.description,a=e.sum,n=e.category_id;o({description:t,sum:a,category_id:n,expense_id:l})},inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:n.category_id,options:c,validationRules:{required:"Parece que no has creado ninguna categor\xeda, hace eso primero",pattern:{value:/^[1-9]\d*$/,message:"Parece que no has creado ninguna categor\xeda, hace eso primero"}}},{name:"description",title:"Descripci\xf3n",defaultValue:n.description,validationRules:{required:"Falta completar la descripcion",minLength:{value:5,message:"La descripcion debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La descripcion debe tener m\xe1ximo 30 caracteres"}}},{name:"sum",title:"Suma",defaultValue:n.sum,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},At={expense_id:0,category_id:0,description:"",sum:0};function Lt(){var e=Object(n.useState)(At),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(n.useState)({title:"error",mode:"error"}),b=Object(m.a)(g,2),O=b[0],v=b[1],h=Object(n.useContext)(E),C=h.confirmationDrawerState,y=h.setConfirmationMenuData,_=be(),j=_.result,D=_.count,S=_.updateFilters,x=_.loadMoreData,k=_.postOrUpdateExpense,w=_.fetchExpenseCategories,F=_.postOrUpdateExpenseCategory,M=_.deleteExpenseCategoryById,P=_.deleteExpenseById,I=_.categories,R=_.category_id;Object(n.useEffect)((function(){w()}),[w]);var V=Object(n.useState)(null),B=Object(m.a)(V,2),T=B[0],q=B[1];return Object(n.useEffect)((function(){I&&q(I.map((function(e){return{name:e.name,value:e.category_id}})))}),[I]),r.a.createElement(L,{title:"Gastos"},r.a.createElement(xt,{updateFilters:S,categories:T}),r.a.createElement(kt,{result:j,count:D,onItemClick:function(e){o(Object(p.a)({},e)),v({title:"Modificar: ".concat(e.description),mode:"edit"}),c.onOpen()},loadMoreData:x}),r.a.createElement(A,{icon:d.b,ariaLabel:"Menu: Gastos",action:function(){return l.onOpen()}}),r.a.createElement(wt,{listItemDrawerState:c,expenseDrawerState:i,confirmationDrawerState:C,expenseData:a,setConfirmationMenuData:y,deleteFunction:P}),r.a.createElement(Ft,{actionButtonDrawerState:l,onAddExpenseClick:function(e){return function(e){o(Object(p.a)({},At)),v({title:e,mode:"create"}),i.onOpen()}(e)},onAddExpenseCategoryClick:u,onModifyExpenseCategoryClick:s}),r.a.createElement(It,{categories:T,expenseDrawerState:i,expenseDrawerFormState:O,submitFunction:function(e){return k(e)},expenseData:a}),r.a.createElement(Mt,{submitFunction:F,expenseCategoryDrawerState:u,categories:T}),r.a.createElement(Pt,{submitFunction:F,modifyExpenseCategoryDrawerState:s,categories:T,selectedCategory:R,deleteExpenseCategoryById:M,confirmationDrawerState:C,setConfirmationMenuData:y,expenseCategoryDrawerState:u}))}function Rt(){return r.a.createElement(L,{title:"Configuracion"},"Configuracion")}new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01");var Vt=function(){var e=Object(f.a)(),t=e.isOpen,a=e.onOpen,o=e.onClose,c=Object(n.useContext)(E),l=c.store.confirmationMenu,i=l.title,u=l.action,s=l.subtitle,m=c.confirmationDrawerState;return r.a.createElement(k.a,{basename:"chakra-stock"},r.a.createElement(v,{onMenuClick:a}),r.a.createElement(G,{isOpen:m.isOpen,onClose:m.onClose,title:i,action:u,subtitle:s}),r.a.createElement(M,{isOpen:t,onClose:o,links:[{name:"Inicio",link:"/",icon:d.h},{name:"Stock",link:"/stock",icon:d.g},{name:"Pedidos",link:"/pedidos",icon:d.i},{name:"Contactos",link:"/contactos",icon:d.m},{name:"Transacciones",link:"/transacciones",icon:d.e},{name:"Gastos",link:"/gastos",icon:d.b}]}),r.a.createElement(Y.c,null,r.a.createElement(Y.a,{exact:!0,path:"/",component:X}),r.a.createElement(Y.a,{path:"/stock",component:Xe}),r.a.createElement(Y.a,{path:"/pedidos",component:pt}),r.a.createElement(Y.a,{path:"/contactos",component:ht}),r.a.createElement(Y.a,{path:"/transacciones",component:St}),r.a.createElement(Y.a,{path:"/gastos",component:Lt}),r.a.createElement(Y.a,{path:"/configuracion",component:Rt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Bt=a(433),Tt=Object(p.a)(Object(p.a)({},Bt.a),{},{colors:Object(p.a)(Object(p.a)({},Bt.a.colors),{},{brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}}),breakpoints:["30em","48em","62em","80em"],fonts:{heading:'"Avenir Next", sans-serif',body:"system-ui, sans-serif",mono:"Menlo, monospace"},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"4rem"}}),qt=a(42),zt=a(441),Ut=a(226),Nt=a.n(Ut),$t="https://chakra-stock.herokuapp.com/login",Gt=function(){var e=Object(n.useContext)(y).dispatch,t=Object(Me.b)(),a=t.register,o=t.handleSubmit,c=t.errors,l=t.formState,u=o((function(t){var a=t.email,n=t.password;console.log($t),ae.a.request({url:$t,method:"POST",data:{email:a,password:n}}).then((function(t){console.log(t),e({type:"SAVE_TOKEN",payload:t.data.token})})).catch((function(e){return console.log(e)}))}));return r.a.createElement("div",null,r.a.createElement(i.a,{textAlign:"center"},r.a.createElement(K.a,{as:"h3"},"Login")),r.a.createElement(J.a,null),r.a.createElement("form",{onSubmit:u},r.a.createElement(Pe.a,{isInvalid:c.email&&c.password},r.a.createElement(it.a,{htmlFor:"email"},"Email"),r.a.createElement(Ie.a,{type:"email",name:"email",ref:a({required:!0})}),r.a.createElement(it.a,{htmlFor:"password"},"Password"),r.a.createElement(Ie.a,{type:"password",name:"password",ref:a({required:!0})}),r.a.createElement(x.a,{mt:4,variantColor:"teal",isLoading:l.isSubmitting,type:"submit",float:"right"},"Submit"))))},Ht=a(222),Wt=function(e){var t=e.children,a=Object(n.useContext)(y),o=a.store,c=o.token,l=o.user.name,i=o.isLoading,u=a.dispatch;return Object(n.useEffect)((function(){var e=localStorage.getItem("token");console.log(e),u(e?{type:"SAVE_TOKEN",payload:e}:{type:"LOADING",payload:!1})}),[u]),Object(n.useEffect)((function(){u({type:"LOADING",payload:!0});var e=Nt.a.decode(c);if(e){localStorage.setItem("token",c);var t="https://chakra-stock.herokuapp.com/users/"+e.sub;ae.a.get(t,{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){console.log(e),u({type:"SAVE_USER",payload:e.data.user})})).catch((function(e){return console.log(e)})).finally((function(){return u({type:"LOADING",payload:!1})}))}else u({type:"LOADING",payload:!1})}),[c,u]),r.a.createElement(r.a.Fragment,null,i?r.a.createElement(I,null,r.a.createElement(Ht.a,{size:"xl"})):l?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(I,null,r.a.createElement(Gt,null)))};c.a.render(r.a.createElement(S,null,r.a.createElement(qt.a,{theme:Tt},r.a.createElement(zt.a,null),r.a.createElement(Wt,null,r.a.createElement(O,null,r.a.createElement(Vt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[227,1,2]]]);
//# sourceMappingURL=main.1ad0f9bb.chunk.js.map